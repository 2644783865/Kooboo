<!-- #layout name=default -->

<style>
    #main {
        position: relative;
    }
    
    .user-card {
        border: 1px solid rgba(0, 0, 0, .2);
        border-radius: 2px;
        margin-bottom: 15px;
    }
    
    .user-detail {
        margin: 10px 0 5px;
    }
    
    .user-avatar {
        width: 40px;
        height: 40px;
        margin-right: 10px;
        line-height: 40px;
        font-weight: 900;
        font-size: 14px;
        text-align: center;
        background: #0087c2;
        border-radius: 50%;
        color: white;
        float: left;
    }
    
    .user-info {
        height: 40px;
        float: left;
    }
    
    .user-info .user-name {
        line-height: 20px;
    }
    
    .user-info .user-balance {
        line-height: 16px;
    }
    
    .content-container {
        margin-bottom: 20px
    }
    
    .content-container h2 {
        margin-top: 0;
    }
    
    .content-container .item {
        border: 1px solid rgba(0, 0, 0, .2);
        border-radius: 2px;
        margin-bottom: 15px;
        padding: 15px 0;
        cursor: pointer;
        position: relative;
        transition: all 200ms;
        top: 0;
    }
    
    .content-container .item:hover {
        top: -4px;
    }
    
    .content-container .item p {
        text-overflow: ellipsis;
        max-height: 36px;
        overflow: hidden;
        min-height: 54px;
    }
    
    .content-container .discussion.item p {
        min-height: auto;
    }
    
    .media .icon {
        width: 64px;
        height: 64px;
        text-align: center;
        line-height: 64px;
        background: #eeeeee;
        display: block;
        border-radius: 2px;
        position: relative;
    }
    
    .media .icon i {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #aaaaaa;
    }
    
    .section-header a {
        color: inherit;
    }
    
    .section-header .title i {
        margin-left: 8px;
        font-size: 20px;
        position: relative;
        top: -3px;
    }
    
    .section-header .extend i {
        font-size: 18px;
    }
    
    .discussion .item-left {
        padding-right: 10px;
        margin-right: 10px;
        border-right: 1px solid #dedede;
        display: inline-block;
    }
    
    .discussion {
        width: 100%;
        zoom: 1;
        overflow: hidden;
    }
    
    .discussion a {
        color: inherit;
    }
    
    .discussion-heading {
        margin-top: 0;
        margin-bottom: 5px;
        max-width: 100%;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }
</style>
<div id="main">
    <div class="page-header">
        <h1 class="title">Witkey</h1>
    </div>
    <div class="row clearfix">
        <div class="col-md-3 pull-right">
            <div class="user-card clearfix">
                <div class="col-md-12">
                    <div class="user-detail clearfix">
                        <div class="user-avatar" data-bind="text: userName() && userName().split('')[0].toUpperCase()"></div>
                        <div class="user-info">
                            <div class="user-name" data-bind="text: userName"></div>
                        </div>
                    </div>
                    <div class="balance-func">
                        <div class="btn-group btn-group-justified">
                            <a data-bind="attr: { href: Kooboo.Route.Get(Kooboo.Route.Discussion.ListPage,{ type: 'me' }) }" class="btn btn-link">My question</a>
                            <a href="javascript:;" class="btn btn-link">My demand</a>
                            <a href="javascript:;" class="btn btn-link">I'm a supplier</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-align">
            </div>
            <div id="side-nav" class="hidden-xs hidden-sm">
                <ul class="nav nav-pills nav-stacked affix" style="max-width: 260px;">
                    <li id="nav_discussions" class="active">
                        <a href="#discussions">Discussions</a>
                    </li>
                    <li id="nav_demand">
                        <a href="#demands">Demands</a>
                    </li>
                    <li id="nav_suppliers">
                        <a href="#suppliers">Suppliers</a>
                    </li>
                </ul>
            </div>
            <div></div>
        </div>
        <div class="col-md-9">
            <div class="content-container" id="discussions">
                <h2 class="section-header clearfix">
                    <div class="pull-left title">
                        <a data-bind="attr: { href: Kooboo.Route.Discussion.ListPage }">Discussions<i class="fa fa-chevron-right"></i></a>
                    </div>
                    <div class="pull-right extend">
                        <a href="javascript:;" data-bind="click: onAddDiscussion"><i class="fa fa-plus"></i></a>
                    </div>
                </h2>
                <div class="content row clearfix" data-bind="foreach: discussions">
                    <div class="col-md-6">
                        <div class="item clearfix">
                            <div class="col-md-12">
                                <div class="discussion">
                                    <a data-bind="attr: { href: Kooboo.Route.Get(Kooboo.Route.Discussion.DetailPage, { id: $data.id }) }">
                                        <div class="discussion-body">
                                            <h4 class="discussion-heading" data-bind="text: $data.title, attr: { title: title }"></h4>
                                            <div class="clearfix">
                                                <div class="pull-left">
                                                    <span class="item-left" data-bind="text: $data.userName"></span>
                                                    <span class="item-right" data-bind="text: new Date($data.lastModified).toDefaultLangString()"></span>
                                                </div>
                                                <div class="pull-right">
                                                    <span class="item-left"><i class="fa fa-eye"></i>&nbsp;
                                                    <!-- ko text: $data.viewCount -->
                                                    <!-- /ko -->
                                                </span>
                                                    <span class="item-right"><i class="fa fa-comment-o"></i>&nbsp;
                                                    <!-- ko text: $data.commentCount -->
                                                    <!-- /ko -->
                                                </span>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="content-container" id="demands">
                <h2 class="section-header clearfix">
                    <div class="pull-left title">
                        <a href="javascript:;">Demands<i class="fa fa-chevron-right"></i></a>
                    </div>
                </h2>
                <div class="content row clearfix" data-bind="foreach: demands">
                    <div class="col-md-4">
                        <div class="item clearfix">
                            <div class="col-md-12">
                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%220%200%2064%2064%22%20preserveAspectRatio%3D%22none%22%3E%3C!--%0ASource%20URL%3A%20holder.js%2F64x64%0ACreated%20with%20Holder.js%202.8.2.%0ALearn%20more%20at%20http%3A%2F%2Fholderjs.com%0A(c)%202012-2015%20Ivan%20Malopinsky%20-%20http%3A%2F%2Fimsky.co%0A--%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%3C!%5BCDATA%5B%23holder_1660ea77f6a%20text%20%7B%20fill%3A%23AAAAAA%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%5D%5D%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1660ea77f6a%22%3E%3Crect%20width%3D%2264%22%20height%3D%2264%22%20fill%3D%22%23EEEEEE%22%2F%3E%3Cg%3E%3Ctext%20x%3D%2213.1796875%22%20y%3D%2236.5%22%3E64x64%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"
                                            data-holder-rendered="true" style="width: 64px; height: 64px;">
                                    </a>
                                    <div class="media-body">
                                        <h4 class="media-heading">Object heading</h4>
                                        <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="content-container" id="suppliers">
                <h2 class="section-header clearfix">
                    <div class="pull-left title">
                        <a href="javascript:;">Suppliers<i class="fa fa-chevron-right"></i></a>
                    </div>
                </h2>
                <div class="content row clearfix" data-bind="foreach: suppliers">
                    <div class="col-md-4">
                        <div class="item clearfix">
                            <div class="col-md-12">
                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%220%200%2064%2064%22%20preserveAspectRatio%3D%22none%22%3E%3C!--%0ASource%20URL%3A%20holder.js%2F64x64%0ACreated%20with%20Holder.js%202.8.2.%0ALearn%20more%20at%20http%3A%2F%2Fholderjs.com%0A(c)%202012-2015%20Ivan%20Malopinsky%20-%20http%3A%2F%2Fimsky.co%0A--%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%3C!%5BCDATA%5B%23holder_1660ea77f6a%20text%20%7B%20fill%3A%23AAAAAA%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%5D%5D%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1660ea77f6a%22%3E%3Crect%20width%3D%2264%22%20height%3D%2264%22%20fill%3D%22%23EEEEEE%22%2F%3E%3Cg%3E%3Ctext%20x%3D%2213.1796875%22%20y%3D%2236.5%22%3E64x64%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"
                                            data-holder-rendered="true" style="width: 64px; height: 64px;">
                                    </a>
                                    <div class="media-body">
                                        <h4 class="media-heading">Object heading</h4>
                                        <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <discussion-modal params="isShow: onShowDiscussionModal"></discussion-modal>
</div>

<script>
    (function() {
        Kooboo.loadJS([
            "/_Admin/Scripts/lib/tinymce/tinymceInitPath.js",
            "/_Admin/Scripts/lib/tinymce/tinymce.min.js",
            "/_Admin/Scripts/kobindings.richeditor.js",
            "/_Admin/Scripts/kobindings.textError.js",
            "/_Admin/View/Witkey/Scripts/components/DiscussionModal.js"
        ])
    })()
</script>

<script src="/_Admin/View/Witkey/Scripts/Kooboo.Witkey.js"></script>
<script src="/_Admin/View/Witkey/Index.js"></script>
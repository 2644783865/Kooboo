<!-- #layout name=default -->
<div id="main" class="fixed">
    <div class="page-header">
        <!-- ko if: isNewForm -->
        <h1 class="title pull-left" data-bind="visible: isNewForm, text: Kooboo.text.common.Form+': '"></h1>
        <button data-bind="visible: isNewForm, click: formatCode" type="button" class="btn btn-default pull-right">Format code</button>
        <div class="col-md-3" data-bind="visible: isNewForm">
            <div class="row form-group">
                <div class="input-group" data-bind="error: name">
                    <input data-bind="value: name" type="text" placeholder="Name" class="form-control input-large">
                </div>
            </div>
        </div>
        <!-- /ko -->
        <!-- ko ifnot: isNewForm -->
        <h1 class="title pull-left">Form<span>:</span>
            <strong data-bind="text: name, attr:{ title: name }"></strong>
        </h1>
        <button data-bind="visible: !isNewForm(), click: formatCode" type="button" class="btn btn-default pull-right">Format code</button>
        <!-- /ko -->
    </div>
    <div class="block-fullpage with-buttons">
        <div class="block-visual-editor default">
            <textarea data-bind="codeMirror: {
                mode: 'htmlmixed',
                value: formContent
            }"></textarea>
        </div>
    </div>
    <div class="page-buttons">
        <div class="btn-group dropup">
            <button data-bind="click: onSaveAndReturn" class="btn green" style="margin:0;">Save & Return</button>
            <a class="btn green dropdown-toggle" data-toggle="dropdown" style="margin:0;min-width:auto;"><i class="fa fa-angle-up"></i></a>
            <ul class="dropdown-menu" role="menu">
                <li><a data-bind="click: onSave" href="javascript:;">Save</a></li>
            </ul>
        </div>
        <a data-bind="click: userCancel" class="btn gray">Cancel</a>
    </div>
</div>

<script>
    (function() {
        Kooboo.loadJS([
            "/_Admin/Scripts/kooboo/Guid.js",
            "/_Admin/Scripts/lib/codemirror/lib/codemirror.js",
            "/_Admin/Scripts/kobindings.codemirror.js",
            "/_Admin/Scripts/lib/codemirror/mode/htmlmixed/htmlmixed.js",
            "/_Admin/Scripts/lib/codemirror/mode/javascript/javascript.js",
            "/_Admin/Scripts/lib/codemirror/mode/xml/xml.js",
            "/_Admin/Scripts/lib/codemirror/mode/css/css.js",
            "/_Admin/Scripts/lib/js-beautify/lib/beautify-html.js",
        ])
        Kooboo.loadCSS([
            "/_Admin/Scripts/lib/codemirror/lib/codemirror.css"
        ])
    })()
</script>
<script src="/_Admin/View/Development/Form.js"></script>